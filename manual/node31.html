<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Installation</TITLE>
<META NAME="description" CONTENT="Installation">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node32.html">
<LINK REL="previous" HREF="node30.html">
<LINK REL="up" HREF="node30.html">
<LINK REL="next" HREF="node32.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html485"
  HREF="node32.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html481"
  HREF="node30.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html475"
  HREF="node30.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html483"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html486"
  HREF="node32.html">Run options</A>
<B> Up:</B> <A NAME="tex2html482"
  HREF="node30.html">Frequently asked questions (FAQs)</A>
<B> Previous:</B> <A NAME="tex2html476"
  HREF="node30.html">Frequently asked questions (FAQs)</A>
 &nbsp; <B>  <A NAME="tex2html484"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00061000000000000000">
Installation</A>
</H2> 

<P>

<UL>
<LI>Is it necessary to have a computer cluster to run <SPAN  CLASS="textit">get_homologues.pl</SPAN>?

<P>
Not really. It can be run on a single machine, but if you have say, more than microbial genomes, the required all-against-all BLAST jobs 
would take some time to complete, depending on your hardware. If this is your case we recommend setting option <code>-n</code> to the number 
of cores of your processor,
as this way BLAST/HMMER jobs will be split and sent to different jobs and the required computing time proportionally reduced.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:RAM"></A><A NAME="631"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 17:</STRONG>
Runtime of a typical bacterial genomic BLASTP jobs as calculated with 1 to 8 CPU cores when splitting the job in batches.
Note that the optimal batch size in this test is 100 sequences (compared  to 250 and 500 sequences).</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
  WIDTH="495" HEIGHT="764" ALIGN="BOTTOM" BORDER="0"
 SRC="./split_blast_bench.png"
 ALT="Image split_blast_bench">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
</LI>
<LI>How do I set up <SPAN  CLASS="textit">get_homologues.pl</SPAN> to run in my computer cluster?

<P>
Cluster jobs are submitted by invoking option <code>-m cluster</code>, instead of explicitely calling <code>qsub</code>.
The fist time such a job is run the following error can be seen:
<PRE>
# running BLAST searches ...
Unable to run job: You have to specify a queue, with the '-q' option to qsub.
Exiting.
[...]
</PRE>

<P>
This usually means that <code>qsub</code> jobs inside <SPAN  CLASS="textit">get_homologues.pl</SPAN> lack a target queue in the cluster. 
Please find out the name of the right queue for your jobs, perhaps something as simple as such as <code>-q default</code>,
and edit the relevant line in the header of <SPAN  CLASS="textit">get_homologues.pl</SPAN>:
<PRE>
my $QUEUESETTINGS = ' -q default ';
</PRE>

<P>
</LI>
<LI>Does <SPAN  CLASS="textit">get_homologues.pl</SPAN> run on Windows?

<P>
As Perl is not installed by default on Windows, not BerkeleyDB is easily installed there, we haven't ported this software to these systems.
However, with some work, you could probably set up a windows machine to run <SPAN  CLASS="textit">get_homologues.pl</SPAN> and most of its dependencies. 
Nevertheless, we have tested the package only on Linux and macOSX systems, and currently the only option for Windows users would be to set up a 
https://www.virtualbox.org/VirtualBox Linux box, and then installing <SPAN  CLASS="textit">get_homologues.pl</SPAN> there. 

<P>
NOTE: If you don't know how to do this please check these resources:
http://www.wikihow.com/Install-Ubuntu-on-VirtualBoxInstall-Ubuntu-on-VirtualBox or 
http://virtualboxes.org/images/ubuntu/virtualboxes.

<P>
</LI>
<LI>How much memory does my computer require to run <SPAN  CLASS="textit">get_homologues.pl</SPAN>?

<P>
This depends directly on the size and number of the genomes to be analyzed. 
A recent benchmark with 71 Mycobacterium genomes and 280k sequences yielded a RAM usage of just over 3700 MB, 
confirming that versions 2.* have a much reduced memory footprint (see Figure <A HREF="#fig:RAMtime">18</A>, in the original 
benchmark up to 40 microbial genomes could be analyzed on a 8Gb RAM Linux box).
<BR>
Moreover, as mentioned in section <A HREF="node11.html#options">3.4</A>, the <code>-s</code> flag option reduces the memory footprint of your 
<SPAN  CLASS="textit">get_homologues</SPAN> up to 20-fold, allowing running large jobs in machines with small RAM resources. 
Therefore, if you are running a large job that fails to finish succesfully, the most common
explanation would be that it was killed by the operating system for taking too much memory. In those cases it is
advisable to re-run the same job with the <code>-s</code> flag.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:RAMtime"></A><A NAME="658"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 18:</STRONG>
Computing time and RAM requirements of the BDBH, COG and OMCL algorithms when processing input volumes of increasing size. 
Performance is measured also with BerkeleyDB (-s flag). </CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
  WIDTH="3152" HEIGHT="3631" ALIGN="BOTTOM" BORDER="0"
 SRC="./performance.png"
 ALT="Image performance">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
</LI>
<LI>What's the performance gain of v2?

<P>
After evolving parts of the original code base, and fixing some bugs (see CHANGES.txt), both 
<SPAN  CLASS="textit">get_homologues.pl</SPAN> and <SPAN  CLASS="textit">get_homologues-est.pl</SPAN> have significantly improved their performance, as can be seen 
in the figure, which combines data from the original benchmark and new data generated after v2 was in place. 

<P>

<DIV ALIGN="CENTER"><A NAME="fig:RAMtimev2"></A><A NAME="668"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 19:</STRONG>
Computing time and RAM requirements of the original algorithm (OMCL, measured on 6 sequence sets) 
as compared to the updated v2 code (measured on 3 three sets).</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
  WIDTH="1035" HEIGHT="1244" ALIGN="BOTTOM" BORDER="0"
 SRC="./performance_v2.png"
 ALT="Image performance_v2">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
</LI>
<LI>BLAST jobs fail in my computer cluster, how can I sort this out?

<P>
When solving problems related with submitting jobs to the cluster it is 
necessary to check the generated <code>.queue</code> files, which capture any errors that might occur during job submission.
If you check one of these files an find a message such as
<BR><code>blast: error while loading shared libraries: libbz2.so.1: cannot open shared object file</code>
this means that some cluster nodes will require the installation of 32-bit compatibility library <code>libbz2.so.1</code>, 
which can be done with root privileges typing this command from your cluster master node:
<BR><code>rocks run host compute "yum -y install bzip2-libs.i386"</code> 
<BR>
<BR>
Another solution would be to use BLAST binaries native to your cluster architecture, as explained in section <A HREF="node5.html#binaries">2.2</A>.

<P>
</LI>
</UL>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html485"
  HREF="node32.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html481"
  HREF="node30.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html475"
  HREF="node30.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html483"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html486"
  HREF="node32.html">Run options</A>
<B> Up:</B> <A NAME="tex2html482"
  HREF="node30.html">Frequently asked questions (FAQs)</A>
<B> Previous:</B> <A NAME="tex2html476"
  HREF="node30.html">Frequently asked questions (FAQs)</A>
 &nbsp; <B>  <A NAME="tex2html484"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Bruno Contreras Moreira
2016-04-28
</ADDRESS>
</BODY>
</HTML>
